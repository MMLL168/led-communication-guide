<!DOCTYPE html> <html lang="zh-TW"> <head>     <meta charset="UTF-8">     <meta name="viewport" content="width=device-width, initial-scale=1.0">     <title>LED 顯示屏串接通訊原理 | 互動指南 v5.2 (Main Guide)</title>     <script src="https://cdn.tailwindcss.com"></script>     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>     <style>         body { font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif; scroll-behavior: smooth; }                  /* Chart Styles */         .chart-container { position: relative; width: 100%; max-width: 600px; margin: 0 auto; height: 350px; max-height: 400px; }         @media (min-width: 768px) { .chart-container { height: 400px; } }          /* Canvas Styles */         .canvas-sim-container { width: 100%; height: 300px; background-color: #f8fafc; border-radius: 0.5rem; border: 1px solid #e2e8f0; position: relative; overflow: hidden; }          /* Connector Card Styles */         .connector-card { transition: all 0.2s ease; cursor: pointer; }         .connector-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }         .connector-card.active { border-color: #4f46e5; background-color: #eff6ff; box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2); }          /* Modal Styles */         .modal { opacity: 0; visibility: hidden; transition: all 0.3s ease-in-out; pointer-events: none; }         .modal.active { opacity: 1; visibility: visible; pointer-events: auto; }         .modal-content { transform: scale(0.95); transition: transform 0.3s ease-in-out; }         .modal.active .modal-content { transform: scale(1); }          /* Pin Table Styles */         .pin-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }         .pin-table th { text-align: left; padding: 8px; background-color: #f1f5f9; color: #475569; border-bottom: 2px solid #e2e8f0; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; }         .pin-table td { padding: 8px; border-bottom: 1px solid #e2e8f0; font-family: monospace; }         .pin-table tr:last-child td { border-bottom: none; }         .wire-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-right: 6px; border: 1px solid #cbd5e1; vertical-align: middle; }          /* Mapping Grid Styles */         .cab-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; aspect-ratio: 16/9; }         .cab-cell { background: #e2e8f0; border: 2px solid #cbd5e1; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #64748b; cursor: pointer; transition: all 0.2s; position: relative; }         .cab-cell:hover { border-color: #6366f1; color: #4f46e5; }         .cab-cell.active { background: #4f46e5; color: white; border-color: #312e81; }         .cab-coord { position: absolute; bottom: 4px; right: 4px; font-size: 0.6rem; opacity: 0.7; }     </style> </head> <body class="bg-slate-50 text-slate-800 leading-relaxed">      <!-- Navigation -->     <header class="bg-white shadow-sm sticky top-0 z-50">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <div class="flex justify-between items-center h-16">                 <div class="flex items-center">                     <span class="text-2xl mr-2">📟</span>                     <h1 class="text-xl font-bold text-slate-900 tracking-tight">LED 顯示屏串接通訊指南 <span class="text-xs bg-indigo-600 text-white px-2 py-0.5 rounded ml-2">v5.2 Guide</span></h1>                 </div>                 <nav class="hidden md:flex items-center space-x-6">                     <button onclick="scrollToSection('protocols')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">通訊協定</button>                     <button onclick="scrollToSection('hardware')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">硬體接頭</button>                     <button onclick="scrollToSection('topology')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">串接拓撲</button>                     <button onclick="scrollToSection('mapping')" class="text-indigo-600 px-2 py-2 text-sm font-medium">像素映射</button>                     <button onclick="scrollToSection('control')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">控制系統</button>                                          <!-- NEW LINK BUTTON -->                     <a href="implementation.html" class="ml-4 bg-slate-900 text-white px-4 py-2 rounded-md text-sm font-bold shadow hover:bg-slate-700 flex items-center transition group border border-slate-700">                         <span>工程實作手冊</span>                         <svg class="w-4 h-4 ml-2 group-hover:translate-x-1 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>                     </a>                 </nav>             </div>         </div>     </header>      <!-- Hero Section -->     <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">         <div class="text-center">             <h2 class="text-3xl font-extrabold text-slate-900 sm:text-4xl">                 大型 LED 顯示屏如何「對話」？             </h2>             <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-500">                 深入解析嵌入式控制系統、訊號協定與物理層架構。             </p>         </div>                  <div class="mt-10 grid grid-cols-1 gap-5 sm:grid-cols-3">             <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-indigo-500">                 <div class="text-lg font-medium text-slate-900">通訊協定</div>                 <p class="mt-2 text-sm text-slate-500">Ethernet (TCP/IP) vs RS-485 序列通訊。</p>             </div>             <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-teal-500">                 <div class="text-lg font-medium text-slate-900">硬體介面</div>                 <p class="mt-2 text-sm text-slate-500">含完整 Pin Definition 與訊號流向圖。</p>             </div>             <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-amber-500">                 <div class="text-lg font-medium text-slate-900">像素映射</div>                 <p class="mt-2 text-sm text-slate-500">解析 FPGA 如何過濾並顯示正確的畫面區塊。</p>             </div>         </div>     </section>      <!-- Section 1: Protocols -->     <section id="protocols" class="bg-white py-12 border-y border-slate-200">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <div class="lg:text-center mb-10">                 <p class="text-base text-indigo-600 font-semibold tracking-wide uppercase">Communication Protocols</p>                 <h3 class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 sm:text-4xl">                     通訊協定比較                 </h3>             </div>              <div class="flex flex-col lg:flex-row gap-12 items-center">                 <div class="w-full lg:w-1/2">                     <div class="chart-container bg-slate-50 rounded-xl p-4 shadow-inner">                         <canvas id="protocolRadarChart"></canvas>                     </div>                     <div class="mt-4 text-center text-sm text-slate-400">                         點擊右側按鈕切換單一協定特徵                     </div>                 </div>                  <div class="w-full lg:w-1/2 space-y-6">                     <div class="flex flex-wrap gap-2 justify-center lg:justify-start">                         <button onclick="updateChart('all')" class="px-4 py-2 bg-slate-800 text-white rounded-md hover:bg-slate-700 transition">全部比較</button>                         <button onclick="updateChart('ethernet')" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition">乙太網路 (Ethernet)</button>                         <button onclick="updateChart('rs485')" class="px-4 py-2 bg-amber-100 text-amber-700 rounded-md hover:bg-amber-200 transition">序列通訊 (RS-485)</button>                         <button onclick="updateChart('fiber')" class="px-4 py-2 bg-teal-100 text-teal-700 rounded-md hover:bg-teal-200 transition">光纖傳輸</button>                     </div>                      <div id="protocol-desc" class="bg-slate-50 p-6 rounded-lg border border-slate-200 min-h-[12rem]">                         <h4 class="text-lg font-bold text-slate-900 mb-2">乙太網路 (Ethernet / TCP/IP)</h4>                         <p class="text-slate-600 mb-2">                             <strong>應用場景：</strong> 目前業界大型 LED 屏與高解析度電視牆的主流標準。                         </p>                         <ul class="list-disc pl-5 space-y-1 text-slate-600 text-sm">                             <li><strong>頻寬：</strong> Gigabit (1000Mbps) 級別，支援影像實時大數據流。</li>                             <li><strong>物理層：</strong> 使用標準 RJ45 接頭與 Cat5e/Cat6 雙絞線。</li>                             <li><strong>機制：</strong> 用於發送卡(Master)對接收卡(Slave)的數據分發。</li>                         </ul>                     </div>                 </div>             </div>         </div>     </section>      <!-- Section 2: Hardware Connectors -->     <section id="hardware" class="py-12 bg-slate-50">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <div class="mb-8">                 <h3 class="text-3xl font-bold text-slate-900">硬體接頭與腳位定義 (Pin Definitions)</h3>                 <p class="mt-4 text-slate-500">                     點擊卡片查看詳細規格、應用場景及 Datasheet 等級的腳位圖。                 </p>             </div>              <!-- Connector Cards -->             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">                 <div onclick="selectConnector('rj45')" id="card-rj45" class="connector-card active cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">                     <div class="text-3xl mb-2">🌐</div>                     <div class="text-xl font-bold text-slate-800">RJ45</div>                     <div class="text-xs text-slate-500">乙太網路介面</div>                 </div>                  <div onclick="selectConnector('aviation')" id="card-aviation" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">                     <div class="text-3xl mb-2">🛡️</div>                     <div class="text-xl font-bold text-slate-800">航空插頭</div>                     <div class="text-xs text-slate-500">防水強固型</div>                 </div>                  <div onclick="selectConnector('fiber')" id="card-fiber" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">                     <div class="text-3xl mb-2">💡</div>                     <div class="text-xl font-bold text-slate-800">光纖接頭</div>                     <div class="text-xs text-slate-500">長距離傳輸</div>                 </div>                  <div onclick="selectConnector('dsub')" id="card-dsub" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">                     <div class="text-3xl mb-2">📟</div>                     <div class="text-xl font-bold text-slate-800">DB9 / RS232</div>                     <div class="text-xs text-slate-500">傳統控制介面</div>                 </div>             </div>              <!-- Detail View -->             <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">                 <div class="flex flex-col lg:flex-row">                     <!-- Left Column: Description -->                     <div class="lg:w-1/2 p-8 border-b lg:border-b-0 lg:border-r border-slate-100">                         <div class="flex items-center gap-4 mb-6">                             <div class="bg-indigo-50 p-4 rounded-lg text-4xl" id="connector-icon">🌐</div>                             <div>                                 <h4 class="text-2xl font-bold text-indigo-700" id="connector-title">RJ45 (乙太網路介面)</h4>                                 <span class="text-sm font-mono text-slate-400">Standard T568B</span>                             </div>                         </div>                         <div class="space-y-4 text-slate-600">                             <p id="connector-desc">                                 LED 顯示屏最核心的數據傳輸介面。通常使用 Cat5e 或 Cat6 網路線連接發送卡與接收卡，以及箱體與箱體之間的級聯 (Cascade)。                             </p>                             <div class="bg-slate-50 p-4 rounded-md border border-slate-200">                                 <h5 class="font-bold text-slate-800 text-sm mb-2">應用筆記：</h5>                                 <div id="connector-specs" class="text-sm space-y-1">                                     <!-- Specs injected by JS -->                                 </div>                             </div>                         </div>                     </div>                      <!-- Right Column: Pin Definition Table -->                     <div class="lg:w-1/2 bg-slate-50 p-0 flex flex-col">                         <div class="bg-slate-200 px-6 py-3 border-b border-slate-300 flex justify-between items-center">                             <span class="font-bold text-slate-700 text-sm">PIN DEFINITION (腳位定義)</span>                             <span class="text-xs bg-white px-2 py-0.5 rounded border border-slate-300 text-slate-500">Datasheet View</span>                         </div>                         <div id="pinout-container" class="flex-grow p-6 overflow-x-auto">                             <!-- Table injected by JS -->                         </div>                     </div>                 </div>             </div>         </div>     </section>      <!-- Section 3: Topology Simulation -->     <section id="topology" class="py-12 bg-white border-y border-slate-200">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <div class="lg:flex lg:items-start lg:gap-12">                 <div class="lg:w-1/3 mb-8 lg:mb-0">                     <h3 class="text-3xl font-bold text-slate-900 mb-4">串接拓撲模擬</h3>                     <p class="text-slate-500 mb-6">                         選擇不同的佈線方式，觀察<strong class="text-amber-600">即時訊號流向 (動態模擬)</strong> 與斷線反應。                     </p>                     <div class="space-y-3">                         <button onclick="setTopology('chain')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn active-topo" data-type="chain">                             <div class="font-bold text-slate-800">菊花鏈 (Daisy Chain)</div>                             <div class="text-xs text-slate-500">單線串接，成本最低。</div>                         </button>                         <button onclick="setTopology('star')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn" data-type="star">                             <div class="font-bold text-slate-800">星狀拓撲 (Star)</div>                             <div class="text-xs text-slate-500">高可靠性，佈線複雜。</div>                         </button>                         <button onclick="setTopology('ring')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn" data-type="ring">                             <div class="font-bold text-slate-800">環狀備援 (Redundant Ring)</div>                             <div class="text-xs text-slate-500">主備援迴路，斷線自動保護。</div>                         </button>                     </div>                     <div id="topo-explanation" class="mt-6 p-4 bg-amber-50 text-amber-800 text-sm rounded border border-amber-200">                         <strong>模擬說明：</strong> 觀察黃色訊號點的移動。在菊花鏈模式下，如果中間斷開，後端所有螢幕都會失去訊號（變紅）。                     </div>                 </div>                 <div class="lg:w-2/3">                     <div class="canvas-sim-container shadow-md">                         <canvas id="topologyCanvas"></canvas>                     </div>                     <div class="flex justify-between mt-2 text-sm text-slate-400 px-2">                         <span>🖥️ 發送卡 (Sender)</span>                         <span>📺 LED 箱體 (Cabinets)</span>                     </div>                 </div>             </div>         </div>     </section>      <!-- SECTION 4: PIXEL MAPPING -->     <section id="mapping" class="py-12 bg-slate-100 border-y border-slate-200">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <div class="lg:text-center mb-8">                 <h3 class="text-3xl leading-8 font-extrabold tracking-tight text-slate-900">                     像素映射與定址原理 (Pixel Mapping)                 </h3>                 <p class="mt-4 max-w-2xl text-xl text-slate-500 lg:mx-auto">                     影像資料如何分割？第二個屏怎麼知道它的位置？答案在於 FPGA 邏輯與 Flash 參數。                 </p>             </div>              <div class="flex flex-col lg:flex-row gap-8 items-start">                 <!-- Left: Interactive Grid -->                 <div class="w-full lg:w-1/2">                     <div class="bg-white p-4 rounded-xl shadow-lg border border-slate-200">                         <div class="flex justify-between items-end mb-2">                             <span class="text-xs font-bold text-slate-400">SOURCE: 1920 x 1080 (Signal Stream)</span>                             <span class="text-xs text-indigo-500">點擊箱體查看詳細邏輯 ↓</span>                         </div>                         <div class="cab-grid" id="mappingGrid"></div>                         <div class="mt-4 p-3 bg-slate-50 border border-slate-200 rounded text-sm font-mono text-slate-600" id="gridConsole">                             > System Ready. Click a cabinet to inspect.                         </div>                     </div>                 </div>                  <!-- Right: Technical Explanation -->                 <div class="w-full lg:w-1/2 space-y-6">                     <div class="bg-indigo-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden">                         <div class="absolute top-0 right-0 -mt-2 -mr-2 w-24 h-24 bg-indigo-700 rounded-full opacity-50 blur-xl"></div>                         <h4 class="text-xl font-bold mb-3 flex items-center gap-2"><span>🤔</span> 技術解密：定址原理</h4>                         <p class="text-indigo-200 text-sm mb-4 leading-relaxed">                             <strong>問：</strong>物理上串接在一起，第二個屏怎麼知道它是第二個？<br>                             <strong>答：</strong>不是靠硬體 DIP 開關，而是靠<strong>軟體燒錄 (Soft-Mapping)</strong>。                         </p>                         <ol class="list-decimal pl-5 space-y-2 text-sm text-indigo-100">                             <li><strong>設定階段：</strong> PC 軟體發送指令，將 <code class="bg-indigo-800 px-1 rounded">Start_X, Start_Y</code> 參數寫入每張接收卡的 <strong>SPI Flash</strong> 記憶體中。</li>                             <li><strong>運行階段：</strong> 發送卡廣播完整的影像資料流 (Broadcast)。</li>                             <li><strong>FPGA 過濾：</strong> 每張卡的 FPGA 實時比對資料流標頭，<strong>只抓取 (Latch)</strong> 符合自己 Flash 內座標參數的像素數據。</li>                         </ol>                     </div>                 </div>             </div>         </div>     </section>      <!-- SECTION 5: CONTROL SYSTEMS -->     <section id="control" class="py-12 bg-slate-50">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">             <h3 class="text-3xl font-bold text-center text-slate-900 mb-10">控制系統架構</h3>             <div class="flex justify-center mb-8">                 <div class="bg-white p-1 rounded-lg border border-slate-300 inline-flex shadow-sm overflow-x-auto max-w-full">                     <button onclick="toggleSystem('sync')" id="btn-sync" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold bg-indigo-600 text-white shadow transition-all whitespace-nowrap">同步控制</button>                     <button onclick="toggleSystem('async')" id="btn-async" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all whitespace-nowrap">非同步控制</button>                     <button onclick="toggleSystem('iot')" id="btn-iot" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">AIoT 無線</button>                     <button onclick="toggleSystem('softsender')" id="btn-softsender" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">RPi 5 軟體發送</button>                     <button onclick="toggleSystem('allinone')" id="btn-allinone" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">單板全整合</button>                 </div>             </div>             <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200 max-w-4xl mx-auto relative">                 <div class="p-8 pb-20">                                          <!-- Sync Content -->                     <div id="sys-content-sync" class="sys-content block">                         <div class="flex flex-col md:flex-row items-center gap-8">                             <div class="md:w-1/3 flex justify-center"><div class="text-8xl">🖥️ ➡️ 📺</div></div>                             <div class="md:w-2/3">                                 <h4 class="text-2xl font-bold text-indigo-700 mb-2">同步控制系統</h4>                                 <p class="text-slate-600 mb-4 font-medium">所見即所得：LED 屏實時顯示電腦螢幕的內容。</p>                                 <ul class="space-y-3 text-slate-600 text-sm">                                     <li class="flex items-start"><span class="mr-2 text-green-500">✓</span><span><strong>硬體：</strong> PC GPU + 發送卡 (Sender)。</span></li>                                     <li class="flex items-start"><span class="mr-2 text-green-500">✓</span><span><strong>資料流：</strong> Gigabit Ethernet 傳輸。</span></li>                                 </ul>                             </div>                         </div>                     </div>                      <!-- Async Content -->                     <div id="sys-content-async" class="sys-content hidden">                         <div class="flex flex-col md:flex-row items-center gap-8">                             <div class="md:w-1/3 flex justify-center"><div class="text-8xl">💾 ➡️ 📺</div></div>                             <div class="md:w-2/3">                                 <h4 class="text-2xl font-bold text-amber-700 mb-2">非同步控制系統</h4>                                 <p class="text-slate-600 mb-4 font-medium">存儲播放：內建嵌入式處理器，脫機運作。</p>                                 <ul class="space-y-3 text-slate-600 text-sm">                                     <li class="flex items-start"><span class="mr-2 text-amber-500">✓</span><span><strong>硬體：</strong> Android/Linux 播放盒。</span></li>                                     <li class="flex items-start"><span class="mr-2 text-amber-500">✓</span><span><strong>流程：</strong> 雲端下發 → 本地存儲播放。</span></li>                                 </ul>                             </div>                         </div>                     </div>                      <!-- Soft Sender Content -->                     <div id="sys-content-softsender" class="sys-content hidden">                         <div class="flex flex-col md:flex-row items-center gap-8">                             <div class="md:w-1/3 flex justify-center text-center">                                 <div class="text-6xl mb-2">🍓 ➡️ 🌐 ➡️ 📦</div>                             </div>                             <div class="md:w-2/3">                                 <h4 class="text-2xl font-bold text-purple-600 mb-2">RPi 5 軟體發送 (Soft-Sender)</h4>                                 <p class="text-slate-600 mb-4 font-medium">極客方案：RPi 5 直接取代發送盒，用網孔直推接收卡。</p>                                 <div class="bg-purple-50 p-3 rounded-md border border-purple-100 mb-3">                                     <strong class="text-purple-800 text-sm block mb-1">技術原理 (Layer 2 Raw Socket)：</strong>                                     <ul class="list-disc pl-4 text-xs text-purple-700 space-y-1">                                         <li>RPi 5 CPU 強大，可生成 Gigabit 等級的 LED 封包。</li>                                         <li><strong>限制：</strong> 僅支援 <span class="font-bold">Colorlight (5A-75B/E)</span> 等開源友善接收卡。</li>                                     </ul>                                 </div>                             </div>                         </div>                     </div>                      <!-- IoT Content -->                     <div id="sys-content-iot" class="sys-content hidden">                         <div class="flex flex-col md:flex-row items-center gap-8">                             <div class="md:w-1/3 flex justify-center text-center">                                 <div class="text-6xl mb-2">🍓 ))) 📶 ))) 📡</div>                             </div>                             <div class="md:w-2/3">                                 <h4 class="text-2xl font-bold text-emerald-600 mb-2">AIoT / 無線分散式架構</h4>                                 <p class="text-slate-600 mb-4 font-medium">創客/物聯網方案：RPi 作為 Server，ESP32 作為無線接收節點。</p>                                 <ul class="space-y-2 text-slate-600 text-sm">                                     <li class="flex items-start"><span class="mr-2 text-emerald-500">●</span><span><strong>ESP32 角色：</strong> 取代接收卡。接收 Wi-Fi 數據 → DMA → HUB75 介面。</span></li>                                 </ul>                             </div>                         </div>                     </div>                      <!-- All-in-One Content -->                     <div id="sys-content-allinone" class="sys-content hidden">                         <div class="flex flex-col md:flex-row items-center gap-8">                             <div class="md:w-1/3 flex justify-center text-center">                                 <div class="text-6xl mb-2">🍓 🎩 ➡️ 🧱</div>                             </div>                             <div class="md:w-2/3">                                 <h4 class="text-2xl font-bold text-red-600 mb-2">單板全整合 (All-in-One)</h4>                                 <p class="text-slate-600 mb-4 font-medium">極致整合：電腦 + 發送卡 + 接收卡 = 單張 RPi 5。</p>                                 <div class="bg-red-50 p-4 rounded-md border border-red-100">                                     <h5 class="text-red-800 font-bold text-sm mb-2">硬體要求：</h5>                                     <ul class="list-disc pl-4 text-xs text-red-700 space-y-1">                                         <li><strong>邏輯層 (Software):</strong> RPi 5 負責影像生成與 PWM 掃描邏輯 (取代 FPGA)。</li>                                         <li><strong>物理層 (Hardware):</strong> 必須搭配 <strong class="bg-white px-1 rounded border border-red-200">Active HAT (緩衝板)</strong>。</li>                                         <li><strong>功能：</strong> HAT 上的 74AHCT245 晶片負責將 3.3V GPIO 升壓至 5V 驅動 HUB75 面板。</li>                                     </ul>                                 </div>                                 <div class="mt-4">                                     <a href="implementation.html" class="inline-flex items-center text-xs font-bold text-red-700 hover:text-red-900 border border-red-300 px-3 py-1 rounded bg-white hover:bg-red-50 transition">                                         前往實作指南 <svg class="w-3 h-3 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>                                     </a>                                 </div>                             </div>                         </div>                     </div>                  </div>                 <!-- Modal Button -->                 <div class="bg-slate-50 px-8 py-4 border-t border-slate-100 text-sm text-slate-500 flex justify-between items-center absolute bottom-0 w-full">                     <span id="sys-footer-text">需要電腦保持開機連接</span>                     <button onclick="openHwModal()" class="text-indigo-600 hover:text-indigo-800 font-bold bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded transition flex items-center gap-2 border border-indigo-200 shadow-sm">                         <span>了解硬體訊號流</span>                         <span>→</span>                     </button>                 </div>             </div>         </div>     </section>      <!-- Footer -->     <footer class="bg-slate-900 text-white py-8 mt-12">         <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">             <p class="text-slate-400">© 2025 LED 技術知識庫 | 基於一般業界通訊與串接標準報告製作</p>         </div>     </footer>      <!-- Hardware Detail Modal -->     <div id="hw-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4">         <div class="absolute inset-0 bg-slate-900 bg-opacity-70 backdrop-blur-sm" onclick="closeHwModal()"></div>         <div class="modal-content bg-white w-full max-w-4xl rounded-2xl shadow-2xl relative z-10 overflow-hidden flex flex-col max-h-[90vh]">             <div class="bg-indigo-600 px-6 py-4 flex justify-between items-center">                 <h3 class="text-xl font-bold text-white">同步控制系統：硬體訊號流架構</h3>                 <button onclick="closeHwModal()" class="text-indigo-200 hover:text-white text-2xl">×</button>             </div>             <div class="p-6 overflow-y-auto bg-slate-50">                 <div class="flex flex-col md:flex-row gap-4 justify-between items-stretch mb-8 relative">                     <!-- Flow Steps -->                     <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">                         <div class="text-3xl mb-1">💻</div><h4 class="font-bold text-sm">訊號源</h4><div class="text-xs text-slate-500">HDMI / CPU</div>                     </div>                     <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">                         <div class="text-3xl mb-1">🎛️</div><h4 class="font-bold text-sm">處理單元</h4><div class="text-xs text-slate-500">Scaling/Logic</div>                     </div>                     <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">                         <div class="text-3xl mb-1">🌐</div><h4 class="font-bold text-sm">傳輸層</h4><div class="text-xs text-slate-500">Ethernet / GPIO</div>                     </div>                     <div class="flex-1 bg-indigo-50 p-4 rounded-xl shadow-sm border border-indigo-200 flex flex-col items-center z-10">                         <div class="text-3xl mb-1">📺</div><h4 class="font-bold text-sm text-indigo-800">接收端</h4><div class="text-xs text-indigo-600">RX Card / HAT</div>                     </div>                 </div>                 <div class="text-sm text-slate-600 bg-white p-4 rounded border">                     <strong>工程師筆記：</strong> 在 All-in-One 架構中，傳統的發送卡與接收卡被 RPi 5 的軟體邏輯 + Active HAT 的物理緩衝所取代。                 </div>             </div>         </div>     </div>      <!-- JavaScript Logic -->     <script>         // --- Modal Logic ---         function openHwModal() { document.getElementById('hw-modal').classList.add('active'); document.body.style.overflow = 'hidden'; }         function closeHwModal() { document.getElementById('hw-modal').classList.remove('active'); document.body.style.overflow = ''; }         document.addEventListener('keydown', function(event) { if (event.key === "Escape") closeHwModal(); });          // --- Navigation ---         function scrollToSection(id) { document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' }); }          // --- Protocol Chart ---         const ctxProtocol = document.getElementById('protocolRadarChart').getContext('2d');         const protocolData = {             ethernet: { label: '乙太網路', data: [9, 9, 8, 7, 10], borderColor: 'rgba(79, 70, 229, 1)', backgroundColor: 'rgba(79, 70, 229, 0.2)', desc: '主流標準。Gbps級速度，RJ45介面，距離100m+。' },             rs485: { label: 'RS-485', data: [3, 7, 9, 9, 5], borderColor: 'rgba(245, 158, 11, 1)', backgroundColor: 'rgba(245, 158, 11, 0.2)', desc: '工業標準。低速控制指令，抗噪強，距離1km+。' },             fiber: { label: '光纖', data: [10, 10, 10, 4, 6], borderColor: 'rgba(20, 184, 166, 1)', backgroundColor: 'rgba(20, 184, 166, 0.2)', desc: '長距離無損傳輸，無電磁干擾，成本高。' }         };         let currentChart = new Chart(ctxProtocol, {             type: 'radar',             data: { labels: ['傳輸速度', '傳輸距離', '抗干擾能力', '成本效益', '普及程度'], datasets: [protocolData.ethernet, protocolData.rs485] },             options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 10, ticks: { display: false } } }, plugins: { legend: { position: 'bottom' } } }         });         function updateChart(type) {             const datasets = type === 'all' ? [protocolData.ethernet, protocolData.rs485, protocolData.fiber] : [protocolData[type]];             currentChart.data.datasets = datasets;             currentChart.update();             const descEl = document.querySelector('#protocol-desc p');             const titleEl = document.querySelector('#protocol-desc h4');             if (type !== 'all') { titleEl.textContent = protocolData[type].label; descEl.textContent = protocolData[type].desc; }             else { titleEl.textContent = "綜合比較"; descEl.textContent = "乙太網路用於影像，RS-485 用於控制，光纖用於長距離。"; }         }          // --- Hardware Connectors & DATA ---         const connectorData = {             rj45: {                 icon: "🌐", title: "RJ45 (乙太網路介面)",                 desc: "LED 顯示屏核心介面。連接發送卡與接收卡，需使用 T568B 標準以確保 Gigabit 速率穩定。",                 specs: "<li>標準：TIA/EIA-568-B</li><li>速率：1000BASE-T (Gigabit)</li><li>線材：Cat5e / Cat6</li>",                 pinoutHTML: `                 <table class="pin-table">                     <thead><tr><th style="width:10%">Pin</th><th>Color (T568B)</th><th>Gigabit Signal</th></tr></thead>                     <tbody>                         <tr><td>1</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, orange 50%)"></span>白/橙</td><td><strong>BI_DA+</strong> (TX+)</td></tr>                         <tr><td>2</td><td><span class="wire-dot" style="background:orange"></span>橙色</td><td><strong>BI_DA-</strong> (TX-)</td></tr>                         <tr><td>3</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, green 50%)"></span>白/綠</td><td><strong>BI_DB+</strong> (RX+)</td></tr>                         <tr><td>4</td><td><span class="wire-dot" style="background:blue"></span>藍色</td><td class="text-slate-400">BI_DC+</td></tr>                         <tr><td>5</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, blue 50%)"></span>白/藍</td><td class="text-slate-400">BI_DC-</td></tr>                         <tr><td>6</td><td><span class="wire-dot" style="background:green"></span>綠色</td><td><strong>BI_DB-</strong> (RX-)</td></tr>                         <tr><td>7</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, brown 50%)"></span>白/棕</td><td class="text-slate-400">BI_DD+</td></tr>                         <tr><td>8</td><td><span class="wire-dot" style="background:brown"></span>棕色</td><td class="text-slate-400">BI_DD-</td></tr>                     </tbody>                 </table>                 <div class="mt-2 text-xs text-slate-400">* BI = Bi-directional (Gigabit 全雙工使用 4 對線)</div>                 `             },             aviation: {                 icon: "🛡️", title: "航空插頭 (Aviation Plug)",                 desc: "戶外屏與租賃屏專用。具備防水環與鎖扣，防止震動脫落。",                 specs: "<li>防水等級：IP65 / IP67</li><li>類型：3 Pin (Power), 4 Pin (Signal)</li>",                 pinoutHTML: `                 <table class="pin-table">                     <thead><tr><th colspan="3" style="text-align:center; background:#e2e8f0;">常見 3-Pin 電源定義</th></tr></thead>                     <tbody>                         <tr><td>1 / L</td><td class="text-red-700 font-bold">Line</td><td>火線 (棕/紅)</td></tr>                         <tr><td>2 / N</td><td class="text-blue-700 font-bold">Neutral</td><td>零線 (藍/黑)</td></tr>                         <tr><td>3 / PE</td><td class="text-green-700 font-bold">Ground</td><td>地線 (黃綠)</td></tr>                     </tbody>                 </table>                 <div class="mt-3 p-2 bg-yellow-50 text-xs text-yellow-800 border border-yellow-200 rounded">⚠️ 注意：訊號用航空頭定義各廠牌(Neutrik/Seetronic)可能不同，請詳閱箱體手冊。</div>                 `             },             fiber: {                 icon: "💡", title: "光纖介面 (Fiber Optic)",                 desc: "控制室距離 > 100m 時使用。需配合 SFP 模組進行光電轉換。",                 specs: "<li>接頭：LC (SFP) / SC</li><li>模式：Single Mode (單模)</li>",                 pinoutHTML: `                 <div class="flex flex-col items-center justify-center h-48 text-slate-500">                     <div class="text-5xl mb-2">TX ⇄ RX</div>                     <p class="text-sm font-bold">Cross Connection</p>                     <p class="text-xs mt-1">光纖無電氣腳位，僅區分發送與接收</p>                 </div>                 `             },             dsub: {                 icon: "📟", title: "DB9 / RS-232",                 desc: "傳統序列通訊，用於連接光感探頭或舊型設備。",                 specs: "<li>介面：DE-9 (Male/Female)</li><li>協定：Async Serial</li>",                 pinoutHTML: `                 <table class="pin-table">                     <thead><tr><th>Pin</th><th>Name</th><th>Function</th></tr></thead>                     <tbody>                         <tr><td>2</td><td><strong>RXD</strong></td><td>Receive Data (接收)</td></tr>                         <tr><td>3</td><td><strong>TXD</strong></td><td>Transmit Data (發送)</td></tr>                         <tr><td>5</td><td><strong>GND</strong></td><td>Ground (地線)</td></tr>                         <tr class="bg-slate-50 text-slate-400"><td>Others</td><td>NC</td><td>No Connection</td></tr>                     </tbody>                 </table>                 `             }         };          function selectConnector(key) {             document.querySelectorAll('.connector-card').forEach(c => c.classList.remove('active'));             document.getElementById(`card-${key}`).classList.add('active');             const data = connectorData[key];             document.getElementById('connector-icon').textContent = data.icon;             document.getElementById('connector-title').textContent = data.title;             document.getElementById('connector-desc').textContent = data.desc;             document.getElementById('connector-specs').innerHTML = data.specs;             document.getElementById('pinout-container').innerHTML = data.pinoutHTML;         }                  // --- Topology & Control Logic (Animation) ---         const canvas = document.getElementById('topologyCanvas');         const ctx = canvas.getContext('2d');         let activeTopology = 'chain';         function resizeCanvas() { canvas.width = canvas.parentElement.clientWidth; canvas.height = canvas.parentElement.clientHeight; }         window.addEventListener('resize', resizeCanvas); resizeCanvas();          class Node { constructor(x, y, label) { this.x = x; this.y = y; this.label = label; } }         let nodes = [];                  function initTopology(type) {             nodes = []; const w = canvas.width, h = canvas.height, startX = 50, startY = h/2;             nodes.push(new Node(startX, startY, 'Sender'));             if(type==='chain'||type==='ring') { const gap=(w-100)/4; for(let i=1;i<=4;i++) nodes.push(new Node(startX+i*gap, startY, `Cab ${i}`)); }             else if(type==='star') { nodes.push(new Node(w/2, h/2-60, 'C1'), new Node(w/2+60, h/2, 'C2'), new Node(w/2, h/2+60, 'C3'), new Node(w/2-60, h/2, 'C4')); }         }          function draw() {             ctx.clearRect(0,0,canvas.width,canvas.height);             if(nodes.length===0) return;              // 1. Static Lines             ctx.lineWidth=3; ctx.strokeStyle='#94a3b8'; ctx.beginPath(); ctx.moveTo(nodes[0].x,nodes[0].y);             if(activeTopology==='chain') for(let i=1;i<nodes.length;i++) ctx.lineTo(nodes[i].x,nodes[i].y);             else if(activeTopology==='star') for(let i=1;i<nodes.length;i++) { ctx.moveTo(nodes[0].x,nodes[0].y); ctx.lineTo(nodes[i].x,nodes[i].y); }             else if(activeTopology==='ring') {                  for(let i=1;i<nodes.length;i++) ctx.lineTo(nodes[i].x,nodes[i].y);                  ctx.stroke(); ctx.beginPath(); ctx.strokeStyle='#10b981';                  ctx.moveTo(nodes[nodes.length-1].x,nodes[nodes.length-1].y);                  ctx.bezierCurveTo(nodes[nodes.length-1].x, nodes[nodes.length-1].y+100, nodes[0].x, nodes[0].y+100, nodes[0].x, nodes[0].y);             }             ctx.stroke();              // 2. Animated Packets             const time = Date.now() * 0.002;             ctx.fillStyle = '#f59e0b';                          if (activeTopology === 'chain') {                 const totalDist = nodes[nodes.length-1].x - nodes[0].x;                 const offset = (time * 100) % totalDist;                 ctx.beginPath(); ctx.arc(nodes[0].x + offset, nodes[0].y, 6, 0, Math.PI*2); ctx.fill();             } else if (activeTopology === 'star') {                 for(let i=1; i<nodes.length; i++) {                     const dx = nodes[i].x - nodes[0].x;                     const dy = nodes[i].y - nodes[0].y;                     const dist = Math.sqrt(dx*dx + dy*dy);                     const progress = (time * 100) % dist;                     const ratio = progress / dist;                     ctx.beginPath(); ctx.arc(nodes[0].x + dx*ratio, nodes[0].y + dy*ratio, 6, 0, Math.PI*2); ctx.fill();                 }             } else if (activeTopology === 'ring') {                 const totalDist = nodes[nodes.length-1].x - nodes[0].x;                 const offset = (time * 100) % totalDist;                 ctx.beginPath(); ctx.arc(nodes[0].x + offset, nodes[0].y, 6, 0, Math.PI*2); ctx.fill();                 ctx.fillStyle = '#10b981';                  const returnProgress = (time * 100) % 1000 / 1000;                 const p0 = {x: nodes[nodes.length-1].x, y: nodes[nodes.length-1].y};                 const p1 = {x: (nodes[nodes.length-1].x + nodes[0].x)/2, y: nodes[0].y + 100};                 const p2 = {x: nodes[0].x, y: nodes[0].y};                 const t = returnProgress;                 const bx = (1-t)*(1-t)*p0.x + 2*(1-t)*t*p1.x + t*t*p2.x;                 const by = (1-t)*(1-t)*p0.y + 2*(1-t)*t*p1.y + t*t*p2.y;                 ctx.beginPath(); ctx.arc(bx, by, 5, 0, Math.PI*2); ctx.fill();             }              // 3. Nodes             nodes.forEach(n=>{                  ctx.fillStyle=n.label==='Sender'?'#334155':'#3b82f6';                  ctx.fillRect(n.x-15,n.y-10,30,20);                  if(n.label!=='Sender' && Math.random()>0.9) { ctx.fillStyle = '#60a5fa'; ctx.fillRect(n.x-12,n.y-8,24,16); }             });             requestAnimationFrame(draw);         }          function setTopology(type) {              activeTopology=type;              document.querySelectorAll('.topo-btn').forEach(b=>b.classList.remove('ring-2','bg-indigo-50'));              document.querySelector(`[data-type="${type}"]`).classList.add('ring-2','bg-indigo-50');              initTopology(type);          }          function toggleSystem(type) {             // Hide all first             ['sync', 'async', 'iot', 'softsender', 'allinone'].forEach(m => {                 const el = document.getElementById(`sys-content-${m}`);                 if(el) el.classList.add('hidden');                 const btn = document.getElementById(`btn-${m}`);                 if(btn) {                     btn.classList.remove('bg-indigo-600', 'bg-amber-600', 'bg-emerald-600', 'bg-purple-600', 'bg-red-600', 'text-white');                     btn.classList.add('text-slate-500');                 }             });              // Show selected             document.getElementById(`sys-content-${type}`).classList.remove('hidden');             const activeBtn = document.getElementById(`btn-${type}`);             activeBtn.classList.remove('text-slate-500');             activeBtn.classList.add('text-white');                          // Color logic             if (type === 'sync') activeBtn.classList.add('bg-indigo-600');             else if (type === 'async') activeBtn.classList.add('bg-amber-600');             else if (type === 'iot') activeBtn.classList.add('bg-emerald-600');             else if (type === 'softsender') activeBtn.classList.add('bg-purple-600');             else if (type === 'allinone') activeBtn.classList.add('bg-red-600');         }          // --- MAPPING LOGIC ---         const cabGrid = document.getElementById('mappingGrid');         const gridConsole = document.getElementById('gridConsole');         const cabinets = [             { id: 1, x: 0, y: 0, w: 640, h: 540 }, { id: 2, x: 640, y: 0, w: 640, h: 540 }, { id: 3, x: 1280, y: 0, w: 640, h: 540 },             { id: 4, x: 0, y: 540, w: 640, h: 540 }, { id: 5, x: 640, y: 540, w: 640, h: 540 }, { id: 6, x: 1280, y: 540, w: 640, h: 540 }         ];          // Init Grid using document fragment for performance         if(cabGrid) {             const fragment = document.createDocumentFragment();             cabinets.forEach(cab => {                 const cell = document.createElement('div');                 cell.className = 'cab-cell';                 cell.innerHTML = `CAB ${cab.id}<span class="cab-coord">(${cab.x},${cab.y})</span>`;                 cell.onclick = () => selectCabinet(cab, cell);                 fragment.appendChild(cell);             });             cabGrid.appendChild(fragment);         }          function selectCabinet(cab, el) {             document.querySelectorAll('.cab-cell').forEach(c => c.classList.remove('active'));             el.classList.add('active');             gridConsole.innerHTML = `                 <span class="text-indigo-600 font-bold">CABINET ${cab.id} SELECTED</span><br/>                 ----------------------------------------<br/>                 <span class="text-slate-500">FLASH CONFIG:</span> START_X=${cab.x}, START_Y=${cab.y}, W=${cab.w}, H=${cab.h}<br/>                 <span class="text-slate-500">FPGA ACTION:</span>  <span class="bg-green-100 text-green-700 px-1">LATCH DATA</span> from stream matching Offset [${cab.x} to ${cab.x+cab.w}]<br/>                 <span class="text-slate-500">STATUS:</span>      Receive & Display             `;         }          // Init all         selectConnector('rj45');         initTopology('chain');          draw();     </script> </body> </html> 
