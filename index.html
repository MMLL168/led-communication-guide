<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED é¡¯ç¤ºå±ä¸²æ¥é€šè¨ŠåŸç† | äº’å‹•æŒ‡å— v4.2 (All-in-One)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif; }
        
        /* Chart Styles */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container { height: 400px; }
        }

        /* Canvas Styles */
        .canvas-sim-container {
            width: 100%;
            height: 300px;
            background-color: #f8fafc;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            position: relative;
            overflow: hidden;
        }

        /* Connector Card Styles */
        .connector-card {
            transition: all 0.2s ease;
        }
        .connector-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .connector-card.active {
            border-color: #4f46e5;
            background-color: #eff6ff;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.2);
        }

        /* Modal Styles */
        .modal {
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease-in-out;
            pointer-events: none;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }

        /* Pin Table Styles */
        .pin-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        .pin-table th {
            text-align: left;
            padding: 8px;
            background-color: #f1f5f9;
            color: #475569;
            border-bottom: 2px solid #e2e8f0;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .pin-table td {
            padding: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-family: monospace;
        }
        .pin-table tr:last-child td {
            border-bottom: none;
        }
        .wire-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
            border: 1px solid #cbd5e1;
            vertical-align: middle;
        }

        /* Mapping Grid Styles */
        .cab-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            aspect-ratio: 16/9;
        }
        .cab-cell {
            background: #e2e8f0;
            border: 2px solid #cbd5e1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .cab-cell:hover {
            border-color: #6366f1;
            color: #4f46e5;
        }
        .cab-cell.active {
            background: #4f46e5;
            color: white;
            border-color: #312e81;
        }
        .cab-coord {
            position: absolute;
            bottom: 4px;
            right: 4px;
            font-size: 0.6rem;
            opacity: 0.7;
        }
    </style>
    <!-- 
       v4.2 Update Log:
       1. Preserved ALL v4.1 functionality.
       2. CONTROL SYSTEM UPDATE: Added "All-in-One" (å–®æ¿å…¨æ•´åˆ) tab.
       3. Architecture: RPi 5 + Active HAT = PC + Sender + Receiver.
       4. Engineering Note: Explained how software (rpi-rgb-led-matrix) replaces FPGA logic.
    -->
</head>
<body class="bg-slate-50 text-slate-800 leading-relaxed">

    <!-- Navigation -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl mr-2">ğŸ“Ÿ</span>
                    <h1 class="text-xl font-bold text-slate-900 tracking-tight">LED é¡¯ç¤ºå±ä¸²æ¥é€šè¨ŠæŒ‡å— <span class="text-xs bg-red-600 text-white px-2 py-0.5 rounded ml-2">v4.2 All-in-One</span></h1>
                </div>
                <nav class="hidden md:flex space-x-6">
                    <button onclick="scrollToSection('protocols')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">é€šè¨Šå”å®š</button>
                    <button onclick="scrollToSection('hardware')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">ç¡¬é«”æ¥é ­</button>
                    <button onclick="scrollToSection('topology')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">ä¸²æ¥æ‹“æ’²</button>
                    <button onclick="scrollToSection('mapping')" class="text-indigo-600 px-2 py-2 text-sm font-bold border-b-2 border-indigo-600">åƒç´ æ˜ å°„</button>
                    <button onclick="scrollToSection('control')" class="text-slate-500 hover:text-indigo-600 px-2 py-2 text-sm font-medium">æ§åˆ¶ç³»çµ±</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center">
            <h2 class="text-3xl font-extrabold text-slate-900 sm:text-4xl">
                å¤§å‹ LED é¡¯ç¤ºå±å¦‚ä½•ã€Œå°è©±ã€ï¼Ÿ
            </h2>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-500">
                æ·±å…¥è§£æåµŒå…¥å¼æ§åˆ¶ç³»çµ±ã€è¨Šè™Ÿå”å®šèˆ‡ç‰©ç†å±¤æ¶æ§‹ã€‚
            </p>
        </div>
        
        <div class="mt-10 grid grid-cols-1 gap-5 sm:grid-cols-3">
            <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-indigo-500">
                <div class="text-lg font-medium text-slate-900">é€šè¨Šå”å®š</div>
                <p class="mt-2 text-sm text-slate-500">Ethernet (TCP/IP) vs RS-485 åºåˆ—é€šè¨Šã€‚</p>
            </div>
            <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-teal-500">
                <div class="text-lg font-medium text-slate-900">ç¡¬é«”ä»‹é¢</div>
                <p class="mt-2 text-sm text-slate-500">å«å®Œæ•´ Pin Definition èˆ‡è¨Šè™Ÿæµå‘åœ–ã€‚</p>
            </div>
            <div class="bg-white overflow-hidden shadow rounded-lg p-6 border-t-4 border-amber-500">
                <div class="text-lg font-medium text-slate-900">åƒç´ æ˜ å°„</div>
                <p class="mt-2 text-sm text-slate-500">è§£æ FPGA å¦‚ä½•éæ¿¾ä¸¦é¡¯ç¤ºæ­£ç¢ºçš„ç•«é¢å€å¡Šã€‚</p>
            </div>
        </div>
    </section>

    <!-- Section 1: Protocols -->
    <section id="protocols" class="bg-white py-12 border-y border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-10">
                <p class="text-base text-indigo-600 font-semibold tracking-wide uppercase">Communication Protocols</p>
                <h3 class="mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 sm:text-4xl">
                    é€šè¨Šå”å®šæ¯”è¼ƒ
                </h3>
            </div>

            <div class="flex flex-col lg:flex-row gap-12 items-center">
                <div class="w-full lg:w-1/2">
                    <div class="chart-container bg-slate-50 rounded-xl p-4 shadow-inner">
                        <canvas id="protocolRadarChart"></canvas>
                    </div>
                    <div class="mt-4 text-center text-sm text-slate-400">
                        é»æ“Šå³å´æŒ‰éˆ•åˆ‡æ›å–®ä¸€å”å®šç‰¹å¾µ
                    </div>
                </div>

                <div class="w-full lg:w-1/2 space-y-6">
                    <div class="flex flex-wrap gap-2 justify-center lg:justify-start">
                        <button onclick="updateChart('all')" class="px-4 py-2 bg-slate-800 text-white rounded-md hover:bg-slate-700 transition">å…¨éƒ¨æ¯”è¼ƒ</button>
                        <button onclick="updateChart('ethernet')" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition">ä¹™å¤ªç¶²è·¯ (Ethernet)</button>
                        <button onclick="updateChart('rs485')" class="px-4 py-2 bg-amber-100 text-amber-700 rounded-md hover:bg-amber-200 transition">åºåˆ—é€šè¨Š (RS-485)</button>
                        <button onclick="updateChart('fiber')" class="px-4 py-2 bg-teal-100 text-teal-700 rounded-md hover:bg-teal-200 transition">å…‰çº–å‚³è¼¸</button>
                    </div>

                    <div id="protocol-desc" class="bg-slate-50 p-6 rounded-lg border border-slate-200 min-h-[12rem]">
                        <h4 class="text-lg font-bold text-slate-900 mb-2">ä¹™å¤ªç¶²è·¯ (Ethernet / TCP/IP)</h4>
                        <p class="text-slate-600 mb-2">
                            <strong>æ‡‰ç”¨å ´æ™¯ï¼š</strong> ç›®å‰æ¥­ç•Œå¤§å‹ LED å±èˆ‡é«˜è§£æåº¦é›»è¦–ç‰†çš„ä¸»æµæ¨™æº–ã€‚
                        </p>
                        <ul class="list-disc pl-5 space-y-1 text-slate-600 text-sm">
                            <li><strong>é »å¯¬ï¼š</strong> Gigabit (1000Mbps) ç´šåˆ¥ï¼Œæ”¯æ´å½±åƒå¯¦æ™‚å¤§æ•¸æ“šæµã€‚</li>
                            <li><strong>ç‰©ç†å±¤ï¼š</strong> ä½¿ç”¨æ¨™æº– RJ45 æ¥é ­èˆ‡ Cat5e/Cat6 é›™çµç·šã€‚</li>
                            <li><strong>æ©Ÿåˆ¶ï¼š</strong> ç”¨æ–¼ç™¼é€å¡(Master)å°æ¥æ”¶å¡(Slave)çš„æ•¸æ“šåˆ†ç™¼ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Hardware Connectors -->
    <section id="hardware" class="py-12 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-8">
                <h3 class="text-3xl font-bold text-slate-900">ç¡¬é«”æ¥é ­èˆ‡è…³ä½å®šç¾© (Pin Definitions)</h3>
                <p class="mt-4 text-slate-500">
                    é»æ“Šå¡ç‰‡æŸ¥çœ‹è©³ç´°è¦æ ¼ã€æ‡‰ç”¨å ´æ™¯åŠ Datasheet ç­‰ç´šçš„è…³ä½åœ–ã€‚
                </p>
            </div>

            <!-- Connector Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div onclick="selectConnector('rj45')" id="card-rj45" class="connector-card active cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">
                    <div class="text-3xl mb-2">ğŸŒ</div>
                    <div class="text-xl font-bold text-slate-800">RJ45</div>
                    <div class="text-xs text-slate-500">ä¹™å¤ªç¶²è·¯ä»‹é¢</div>
                </div>

                <div onclick="selectConnector('aviation')" id="card-aviation" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">
                    <div class="text-3xl mb-2">ğŸ›¡ï¸</div>
                    <div class="text-xl font-bold text-slate-800">èˆªç©ºæ’é ­</div>
                    <div class="text-xs text-slate-500">é˜²æ°´å¼·å›ºå‹</div>
                </div>

                <div onclick="selectConnector('fiber')" id="card-fiber" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">
                    <div class="text-3xl mb-2">ğŸ’¡</div>
                    <div class="text-xl font-bold text-slate-800">å…‰çº–æ¥é ­</div>
                    <div class="text-xs text-slate-500">é•·è·é›¢å‚³è¼¸</div>
                </div>

                <div onclick="selectConnector('dsub')" id="card-dsub" class="connector-card cursor-pointer bg-white p-6 rounded-xl border border-slate-200 relative overflow-hidden group">
                    <div class="text-3xl mb-2">ğŸ“Ÿ</div>
                    <div class="text-xl font-bold text-slate-800">DB9 / RS232</div>
                    <div class="text-xs text-slate-500">å‚³çµ±æ§åˆ¶ä»‹é¢</div>
                </div>
            </div>

            <!-- Detail View -->
            <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                <div class="flex flex-col lg:flex-row">
                    <!-- Left Column: Description -->
                    <div class="lg:w-1/2 p-8 border-b lg:border-b-0 lg:border-r border-slate-100">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="bg-indigo-50 p-4 rounded-lg text-4xl" id="connector-icon">ğŸŒ</div>
                            <div>
                                <h4 class="text-2xl font-bold text-indigo-700" id="connector-title">RJ45 (ä¹™å¤ªç¶²è·¯ä»‹é¢)</h4>
                                <span class="text-sm font-mono text-slate-400">Standard T568B</span>
                            </div>
                        </div>
                        <div class="space-y-4 text-slate-600">
                            <p id="connector-desc">
                                LED é¡¯ç¤ºå±æœ€æ ¸å¿ƒçš„æ•¸æ“šå‚³è¼¸ä»‹é¢ã€‚é€šå¸¸ä½¿ç”¨ Cat5e æˆ– Cat6 ç¶²è·¯ç·šé€£æ¥ç™¼é€å¡èˆ‡æ¥æ”¶å¡ï¼Œä»¥åŠç®±é«”èˆ‡ç®±é«”ä¹‹é–“çš„ç´šè¯ (Cascade)ã€‚
                            </p>
                            <div class="bg-slate-50 p-4 rounded-md border border-slate-200">
                                <h5 class="font-bold text-slate-800 text-sm mb-2">æ‡‰ç”¨ç­†è¨˜ï¼š</h5>
                                <div id="connector-specs" class="text-sm space-y-1">
                                    <!-- Specs injected by JS -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Pin Definition Table -->
                    <div class="lg:w-1/2 bg-slate-50 p-0 flex flex-col">
                        <div class="bg-slate-200 px-6 py-3 border-b border-slate-300 flex justify-between items-center">
                            <span class="font-bold text-slate-700 text-sm">PIN DEFINITION (è…³ä½å®šç¾©)</span>
                            <span class="text-xs bg-white px-2 py-0.5 rounded border border-slate-300 text-slate-500">Datasheet View</span>
                        </div>
                        <div id="pinout-container" class="flex-grow p-6 overflow-x-auto">
                            <!-- Table injected by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Topology Simulation -->
    <section id="topology" class="py-12 bg-white border-y border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:flex lg:items-start lg:gap-12">
                <div class="lg:w-1/3 mb-8 lg:mb-0">
                    <h3 class="text-3xl font-bold text-slate-900 mb-4">ä¸²æ¥æ‹“æ’²æ¨¡æ“¬</h3>
                    <p class="text-slate-500 mb-6">
                        é¸æ“‡ä¸åŒçš„ä½ˆç·šæ–¹å¼ï¼Œè§€å¯Ÿ<strong class="text-amber-600">å³æ™‚è¨Šè™Ÿæµå‘ (å‹•æ…‹æ¨¡æ“¬)</strong> èˆ‡æ–·ç·šåæ‡‰ã€‚
                    </p>
                    <div class="space-y-3">
                        <button onclick="setTopology('chain')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn active-topo" data-type="chain">
                            <div class="font-bold text-slate-800">èŠèŠ±éˆ (Daisy Chain)</div>
                            <div class="text-xs text-slate-500">å–®ç·šä¸²æ¥ï¼Œæˆæœ¬æœ€ä½ã€‚</div>
                        </button>
                        <button onclick="setTopology('star')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn" data-type="star">
                            <div class="font-bold text-slate-800">æ˜Ÿç‹€æ‹“æ’² (Star)</div>
                            <div class="text-xs text-slate-500">é«˜å¯é æ€§ï¼Œä½ˆç·šè¤‡é›œã€‚</div>
                        </button>
                        <button onclick="setTopology('ring')" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 hover:border-indigo-500 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition topo-btn" data-type="ring">
                            <div class="font-bold text-slate-800">ç’°ç‹€å‚™æ´ (Redundant Ring)</div>
                            <div class="text-xs text-slate-500">ä¸»å‚™æ´è¿´è·¯ï¼Œæ–·ç·šè‡ªå‹•ä¿è­·ã€‚</div>
                        </button>
                    </div>
                    <div id="topo-explanation" class="mt-6 p-4 bg-amber-50 text-amber-800 text-sm rounded border border-amber-200">
                        <strong>æ¨¡æ“¬èªªæ˜ï¼š</strong> è§€å¯Ÿé»ƒè‰²è¨Šè™Ÿé»çš„ç§»å‹•ã€‚åœ¨èŠèŠ±éˆæ¨¡å¼ä¸‹ï¼Œå¦‚æœä¸­é–“æ–·é–‹ï¼Œå¾Œç«¯æ‰€æœ‰è¢å¹•éƒ½æœƒå¤±å»è¨Šè™Ÿï¼ˆè®Šç´…ï¼‰ã€‚
                    </div>
                </div>
                <div class="lg:w-2/3">
                    <div class="canvas-sim-container shadow-md">
                        <canvas id="topologyCanvas"></canvas>
                    </div>
                    <div class="flex justify-between mt-2 text-sm text-slate-400 px-2">
                        <span>ğŸ–¥ï¸ ç™¼é€å¡ (Sender)</span>
                        <span>ğŸ“º LED ç®±é«” (Cabinets)</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 4: PIXEL MAPPING -->
    <section id="mapping" class="py-12 bg-slate-100 border-y border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="lg:text-center mb-8">
                <h3 class="text-3xl leading-8 font-extrabold tracking-tight text-slate-900">
                    åƒç´ æ˜ å°„èˆ‡å®šå€åŸç† (Pixel Mapping)
                </h3>
                <p class="mt-4 max-w-2xl text-xl text-slate-500 lg:mx-auto">
                    å½±åƒè³‡æ–™å¦‚ä½•åˆ†å‰²ï¼Ÿç¬¬äºŒå€‹å±æ€éº¼çŸ¥é“å®ƒçš„ä½ç½®ï¼Ÿç­”æ¡ˆåœ¨æ–¼ FPGA é‚è¼¯èˆ‡ Flash åƒæ•¸ã€‚
                </p>
            </div>

            <div class="flex flex-col lg:flex-row gap-8 items-start">
                <!-- Left: Interactive Grid -->
                <div class="w-full lg:w-1/2">
                    <div class="bg-white p-4 rounded-xl shadow-lg border border-slate-200">
                        <div class="flex justify-between items-end mb-2">
                            <span class="text-xs font-bold text-slate-400">SOURCE: 1920 x 1080 (Signal Stream)</span>
                            <span class="text-xs text-indigo-500">é»æ“Šç®±é«”æŸ¥çœ‹è©³ç´°é‚è¼¯ â†“</span>
                        </div>
                        <div class="cab-grid" id="mappingGrid"></div>
                        <div class="mt-4 p-3 bg-slate-50 border border-slate-200 rounded text-sm font-mono text-slate-600" id="gridConsole">
                            > System Ready. Click a cabinet to inspect.
                        </div>
                    </div>
                </div>

                <!-- Right: Technical Explanation -->
                <div class="w-full lg:w-1/2 space-y-6">
                    <div class="bg-indigo-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden">
                        <div class="absolute top-0 right-0 -mt-2 -mr-2 w-24 h-24 bg-indigo-700 rounded-full opacity-50 blur-xl"></div>
                        <h4 class="text-xl font-bold mb-3 flex items-center gap-2"><span>ğŸ¤”</span> æŠ€è¡“è§£å¯†ï¼šå®šå€åŸç†</h4>
                        <p class="text-indigo-200 text-sm mb-4 leading-relaxed">
                            <strong>å•ï¼š</strong>ç‰©ç†ä¸Šä¸²æ¥åœ¨ä¸€èµ·ï¼Œç¬¬äºŒå€‹å±æ€éº¼çŸ¥é“å®ƒæ˜¯ç¬¬äºŒå€‹ï¼Ÿ<br>
                            <strong>ç­”ï¼š</strong>ä¸æ˜¯é ç¡¬é«” DIP é–‹é—œï¼Œè€Œæ˜¯é <strong>è»Ÿé«”ç‡’éŒ„ (Soft-Mapping)</strong>ã€‚
                        </p>
                        <ol class="list-decimal pl-5 space-y-2 text-sm text-indigo-100">
                            <li><strong>è¨­å®šéšæ®µï¼š</strong> PC è»Ÿé«”ç™¼é€æŒ‡ä»¤ï¼Œå°‡ <code class="bg-indigo-800 px-1 rounded">Start_X, Start_Y</code> åƒæ•¸å¯«å…¥æ¯å¼µæ¥æ”¶å¡çš„ <strong>SPI Flash</strong> è¨˜æ†¶é«”ä¸­ã€‚</li>
                            <li><strong>é‹è¡Œéšæ®µï¼š</strong> ç™¼é€å¡å»£æ’­å®Œæ•´çš„å½±åƒè³‡æ–™æµ (Broadcast)ã€‚</li>
                            <li><strong>FPGA éæ¿¾ï¼š</strong> æ¯å¼µå¡çš„ FPGA å¯¦æ™‚æ¯”å°è³‡æ–™æµæ¨™é ­ï¼Œ<strong>åªæŠ“å– (Latch)</strong> ç¬¦åˆè‡ªå·± Flash å…§åº§æ¨™åƒæ•¸çš„åƒç´ æ•¸æ“šã€‚</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 5: CONTROL SYSTEMS (UPDATED FOR All-in-One) -->
    <section id="control" class="py-12 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h3 class="text-3xl font-bold text-center text-slate-900 mb-10">æ§åˆ¶ç³»çµ±æ¶æ§‹</h3>
            <div class="flex justify-center mb-8">
                <div class="bg-white p-1 rounded-lg border border-slate-300 inline-flex shadow-sm overflow-x-auto max-w-full">
                    <button onclick="toggleSystem('sync')" id="btn-sync" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold bg-indigo-600 text-white shadow transition-all whitespace-nowrap">åŒæ­¥æ§åˆ¶</button>
                    <button onclick="toggleSystem('async')" id="btn-async" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all whitespace-nowrap">éåŒæ­¥æ§åˆ¶</button>
                    <button onclick="toggleSystem('iot')" id="btn-iot" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">AIoT ç„¡ç·š</button>
                    <button onclick="toggleSystem('softsender')" id="btn-softsender" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">RPi 5 è»Ÿé«”ç™¼é€</button>
                    <!-- NEW All-in-One BUTTON -->
                    <button onclick="toggleSystem('allinone')" id="btn-allinone" class="px-4 md:px-6 py-2 rounded-md text-sm font-bold text-slate-500 hover:bg-slate-100 transition-all border-l border-slate-200 whitespace-nowrap">å–®æ¿å…¨æ•´åˆ</button>
                </div>
            </div>
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-slate-200 max-w-4xl mx-auto relative">
                <div class="p-8 pb-20">
                    
                    <!-- Sync Content -->
                    <div id="sys-content-sync" class="sys-content block">
                        <div class="flex flex-col md:flex-row items-center gap-8">
                            <div class="md:w-1/3 flex justify-center"><div class="text-8xl">ğŸ–¥ï¸ â¡ï¸ ğŸ“º</div></div>
                            <div class="md:w-2/3">
                                <h4 class="text-2xl font-bold text-indigo-700 mb-2">åŒæ­¥æ§åˆ¶ç³»çµ±</h4>
                                <p class="text-slate-600 mb-4 font-medium">æ‰€è¦‹å³æ‰€å¾—ï¼šLED å±å¯¦æ™‚é¡¯ç¤ºé›»è…¦è¢å¹•çš„å…§å®¹ã€‚</p>
                                <ul class="space-y-3 text-slate-600 text-sm">
                                    <li class="flex items-start"><span class="mr-2 text-green-500">âœ“</span><span><strong>ç¡¬é«”ï¼š</strong> PC GPU + ç™¼é€å¡ (Sender)ã€‚</span></li>
                                    <li class="flex items-start"><span class="mr-2 text-green-500">âœ“</span><span><strong>è³‡æ–™æµï¼š</strong> Gigabit Ethernet å‚³è¼¸ã€‚</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Async Content -->
                    <div id="sys-content-async" class="sys-content hidden">
                        <div class="flex flex-col md:flex-row items-center gap-8">
                            <div class="md:w-1/3 flex justify-center"><div class="text-8xl">ğŸ’¾ â¡ï¸ ğŸ“º</div></div>
                            <div class="md:w-2/3">
                                <h4 class="text-2xl font-bold text-amber-700 mb-2">éåŒæ­¥æ§åˆ¶ç³»çµ±</h4>
                                <p class="text-slate-600 mb-4 font-medium">å­˜å„²æ’­æ”¾ï¼šå…§å»ºåµŒå…¥å¼è™•ç†å™¨ï¼Œè„«æ©Ÿé‹ä½œã€‚</p>
                                <ul class="space-y-3 text-slate-600 text-sm">
                                    <li class="flex items-start"><span class="mr-2 text-amber-500">âœ“</span><span><strong>ç¡¬é«”ï¼š</strong> Android/Linux æ’­æ”¾ç›’ã€‚</span></li>
                                    <li class="flex items-start"><span class="mr-2 text-amber-500">âœ“</span><span><strong>æµç¨‹ï¼š</strong> é›²ç«¯ä¸‹ç™¼ â†’ æœ¬åœ°å­˜å„²æ’­æ”¾ã€‚</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Soft Sender Content -->
                    <div id="sys-content-softsender" class="sys-content hidden">
                        <div class="flex flex-col md:flex-row items-center gap-8">
                            <div class="md:w-1/3 flex justify-center text-center">
                                <div class="text-6xl mb-2">ğŸ“ â¡ï¸ ğŸŒ â¡ï¸ ğŸ“¦</div>
                            </div>
                            <div class="md:w-2/3">
                                <h4 class="text-2xl font-bold text-purple-600 mb-2">RPi 5 è»Ÿé«”ç™¼é€ (Soft-Sender)</h4>
                                <p class="text-slate-600 mb-4 font-medium">æ¥µå®¢æ–¹æ¡ˆï¼šRPi 5 ç›´æ¥å–ä»£ç™¼é€ç›’ï¼Œç”¨ç¶²å­”ç›´æ¨æ¥æ”¶å¡ã€‚</p>
                                <div class="bg-purple-50 p-3 rounded-md border border-purple-100 mb-3">
                                    <strong class="text-purple-800 text-sm block mb-1">æŠ€è¡“åŸç† (Layer 2 Raw Socket)ï¼š</strong>
                                    <ul class="list-disc pl-4 text-xs text-purple-700 space-y-1">
                                        <li>RPi 5 CPU å¼·å¤§ï¼Œå¯ç”Ÿæˆ Gigabit ç­‰ç´šçš„ LED å°åŒ…ã€‚</li>
                                        <li><strong>é™åˆ¶ï¼š</strong> åƒ…æ”¯æ´ <span class="font-bold">Colorlight (5A-75B/E)</span> ç­‰é–‹æºå‹å–„æ¥æ”¶å¡ã€‚</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- IoT Content -->
                    <div id="sys-content-iot" class="sys-content hidden">
                        <div class="flex flex-col md:flex-row items-center gap-8">
                            <div class="md:w-1/3 flex justify-center text-center">
                                <div class="text-6xl mb-2">ğŸ“ ))) ğŸ“¶ ))) ğŸ“¡</div>
                            </div>
                            <div class="md:w-2/3">
                                <h4 class="text-2xl font-bold text-emerald-600 mb-2">AIoT / ç„¡ç·šåˆ†æ•£å¼æ¶æ§‹</h4>
                                <p class="text-slate-600 mb-4 font-medium">å‰µå®¢/ç‰©è¯ç¶²æ–¹æ¡ˆï¼šRPi ä½œç‚º Serverï¼ŒESP32 ä½œç‚ºç„¡ç·šæ¥æ”¶ç¯€é»ã€‚</p>
                                <ul class="space-y-2 text-slate-600 text-sm">
                                    <li class="flex items-start"><span class="mr-2 text-emerald-500">â—</span><span><strong>ESP32 è§’è‰²ï¼š</strong> å–ä»£æ¥æ”¶å¡ã€‚æ¥æ”¶ Wi-Fi æ•¸æ“š â†’ DMA â†’ HUB75 ä»‹é¢ã€‚</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- All-in-One Content (NEW v4.2) -->
                    <div id="sys-content-allinone" class="sys-content hidden">
                        <div class="flex flex-col md:flex-row items-center gap-8">
                            <div class="md:w-1/3 flex justify-center text-center">
                                <div class="text-6xl mb-2">ğŸ“ ğŸ© â¡ï¸ ğŸ§±</div>
                            </div>
                            <div class="md:w-2/3">
                                <h4 class="text-2xl font-bold text-red-600 mb-2">å–®æ¿å…¨æ•´åˆ (All-in-One)</h4>
                                <p class="text-slate-600 mb-4 font-medium">æ¥µè‡´æ•´åˆï¼šé›»è…¦ + ç™¼é€å¡ + æ¥æ”¶å¡ = å–®å¼µ RPi 5ã€‚</p>
                                <div class="bg-red-50 p-4 rounded-md border border-red-100">
                                    <h5 class="text-red-800 font-bold text-sm mb-2">ç¡¬é«”è¦æ±‚ï¼š</h5>
                                    <ul class="list-disc pl-4 text-xs text-red-700 space-y-1">
                                        <li><strong>é‚è¼¯å±¤ (Software):</strong> RPi 5 è² è²¬å½±åƒç”Ÿæˆèˆ‡ PWM æƒæé‚è¼¯ (å–ä»£ FPGA)ã€‚</li>
                                        <li><strong>ç‰©ç†å±¤ (Hardware):</strong> å¿…é ˆæ­é… <strong class="bg-white px-1 rounded border border-red-200">Active HAT (ç·©è¡æ¿)</strong>ã€‚</li>
                                        <li><strong>åŠŸèƒ½ï¼š</strong> HAT ä¸Šçš„ 74AHCT245 æ™¶ç‰‡è² è²¬å°‡ 3.3V GPIO å‡å£“è‡³ 5V é©…å‹• HUB75 é¢æ¿ã€‚</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- Modal Button -->
                <div class="bg-slate-50 px-8 py-4 border-t border-slate-100 text-sm text-slate-500 flex justify-between items-center absolute bottom-0 w-full">
                    <span id="sys-footer-text">éœ€è¦é›»è…¦ä¿æŒé–‹æ©Ÿé€£æ¥</span>
                    <button onclick="openHwModal()" class="text-indigo-600 hover:text-indigo-800 font-bold bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded transition flex items-center gap-2 border border-indigo-200 shadow-sm">
                        <span>äº†è§£ç¡¬é«”è¨Šè™Ÿæµ</span>
                        <span>â†’</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-slate-400">Â© 2025 LED æŠ€è¡“çŸ¥è­˜åº« | åŸºæ–¼ä¸€èˆ¬æ¥­ç•Œé€šè¨Šèˆ‡ä¸²æ¥æ¨™æº–å ±å‘Šè£½ä½œ</p>
        </div>
    </footer>

    <!-- Hardware Detail Modal -->
    <div id="hw-modal" class="modal fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-900 bg-opacity-70 backdrop-blur-sm" onclick="closeHwModal()"></div>
        <div class="modal-content bg-white w-full max-w-4xl rounded-2xl shadow-2xl relative z-10 overflow-hidden flex flex-col max-h-[90vh]">
            <div class="bg-indigo-600 px-6 py-4 flex justify-between items-center">
                <h3 class="text-xl font-bold text-white">åŒæ­¥æ§åˆ¶ç³»çµ±ï¼šç¡¬é«”è¨Šè™Ÿæµæ¶æ§‹</h3>
                <button onclick="closeHwModal()" class="text-indigo-200 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto bg-slate-50">
                <div class="flex flex-col md:flex-row gap-4 justify-between items-stretch mb-8 relative">
                    <!-- Flow Steps -->
                    <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">
                        <div class="text-3xl mb-1">ğŸ’»</div><h4 class="font-bold text-sm">è¨Šè™Ÿæº</h4><div class="text-xs text-slate-500">HDMI / CPU</div>
                    </div>
                    <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">
                        <div class="text-3xl mb-1">ğŸ›ï¸</div><h4 class="font-bold text-sm">è™•ç†å–®å…ƒ</h4><div class="text-xs text-slate-500">Scaling/Logic</div>
                    </div>
                    <div class="flex-1 bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center relative flow-arrow z-10">
                        <div class="text-3xl mb-1">ğŸŒ</div><h4 class="font-bold text-sm">å‚³è¼¸å±¤</h4><div class="text-xs text-slate-500">Ethernet / GPIO</div>
                    </div>
                    <div class="flex-1 bg-indigo-50 p-4 rounded-xl shadow-sm border border-indigo-200 flex flex-col items-center z-10">
                        <div class="text-3xl mb-1">ğŸ“º</div><h4 class="font-bold text-sm text-indigo-800">æ¥æ”¶ç«¯</h4><div class="text-xs text-indigo-600">RX Card / HAT</div>
                    </div>
                </div>
                <div class="text-sm text-slate-600 bg-white p-4 rounded border">
                    <strong>å·¥ç¨‹å¸«ç­†è¨˜ï¼š</strong> åœ¨ All-in-One æ¶æ§‹ä¸­ï¼Œå‚³çµ±çš„ç™¼é€å¡èˆ‡æ¥æ”¶å¡è¢« RPi 5 çš„è»Ÿé«”é‚è¼¯ + Active HAT çš„ç‰©ç†ç·©è¡æ‰€å–ä»£ã€‚
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- Modal Logic ---
        function openHwModal() { document.getElementById('hw-modal').classList.add('active'); document.body.style.overflow = 'hidden'; }
        function closeHwModal() { document.getElementById('hw-modal').classList.remove('active'); document.body.style.overflow = ''; }
        document.addEventListener('keydown', function(event) { if (event.key === "Escape") closeHwModal(); });

        // --- Navigation ---
        function scrollToSection(id) { document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' }); }

        // --- Protocol Chart ---
        const ctxProtocol = document.getElementById('protocolRadarChart').getContext('2d');
        const protocolData = {
            ethernet: { label: 'ä¹™å¤ªç¶²è·¯', data: [9, 9, 8, 7, 10], borderColor: 'rgba(79, 70, 229, 1)', backgroundColor: 'rgba(79, 70, 229, 0.2)', desc: 'ä¸»æµæ¨™æº–ã€‚Gbpsç´šé€Ÿåº¦ï¼ŒRJ45ä»‹é¢ï¼Œè·é›¢100m+ã€‚' },
            rs485: { label: 'RS-485', data: [3, 7, 9, 9, 5], borderColor: 'rgba(245, 158, 11, 1)', backgroundColor: 'rgba(245, 158, 11, 0.2)', desc: 'å·¥æ¥­æ¨™æº–ã€‚ä½é€Ÿæ§åˆ¶æŒ‡ä»¤ï¼ŒæŠ—å™ªå¼·ï¼Œè·é›¢1km+ã€‚' },
            fiber: { label: 'å…‰çº–', data: [10, 10, 10, 4, 6], borderColor: 'rgba(20, 184, 166, 1)', backgroundColor: 'rgba(20, 184, 166, 0.2)', desc: 'é•·è·é›¢ç„¡æå‚³è¼¸ï¼Œç„¡é›»ç£å¹²æ“¾ï¼Œæˆæœ¬é«˜ã€‚' }
        };
        let currentChart = new Chart(ctxProtocol, {
            type: 'radar',
            data: { labels: ['å‚³è¼¸é€Ÿåº¦', 'å‚³è¼¸è·é›¢', 'æŠ—å¹²æ“¾èƒ½åŠ›', 'æˆæœ¬æ•ˆç›Š', 'æ™®åŠç¨‹åº¦'], datasets: [protocolData.ethernet, protocolData.rs485] },
            options: { responsive: true, maintainAspectRatio: false, scales: { r: { suggestedMin: 0, suggestedMax: 10, ticks: { display: false } } }, plugins: { legend: { position: 'bottom' } } }
        });
        function updateChart(type) {
            const datasets = type === 'all' ? [protocolData.ethernet, protocolData.rs485, protocolData.fiber] : [protocolData[type]];
            currentChart.data.datasets = datasets;
            currentChart.update();
            const descEl = document.querySelector('#protocol-desc p');
            const titleEl = document.querySelector('#protocol-desc h4');
            if (type !== 'all') { titleEl.textContent = protocolData[type].label; descEl.textContent = protocolData[type].desc; }
            else { titleEl.textContent = "ç¶œåˆæ¯”è¼ƒ"; descEl.textContent = "ä¹™å¤ªç¶²è·¯ç”¨æ–¼å½±åƒï¼ŒRS-485 ç”¨æ–¼æ§åˆ¶ï¼Œå…‰çº–ç”¨æ–¼é•·è·é›¢ã€‚"; }
        }

        // --- Hardware Connectors & DATA ---
        const connectorData = {
            rj45: {
                icon: "ğŸŒ", title: "RJ45 (ä¹™å¤ªç¶²è·¯ä»‹é¢)",
                desc: "LED é¡¯ç¤ºå±æ ¸å¿ƒä»‹é¢ã€‚é€£æ¥ç™¼é€å¡èˆ‡æ¥æ”¶å¡ï¼Œéœ€ä½¿ç”¨ T568B æ¨™æº–ä»¥ç¢ºä¿ Gigabit é€Ÿç‡ç©©å®šã€‚",
                specs: "<li>æ¨™æº–ï¼šTIA/EIA-568-B</li><li>é€Ÿç‡ï¼š1000BASE-T (Gigabit)</li><li>ç·šæï¼šCat5e / Cat6</li>",
                pinoutHTML: `
                <table class="pin-table">
                    <thead><tr><th style="width:10%">Pin</th><th>Color (T568B)</th><th>Gigabit Signal</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, orange 50%)"></span>ç™½/æ©™</td><td><strong>BI_DA+</strong> (TX+)</td></tr>
                        <tr><td>2</td><td><span class="wire-dot" style="background:orange"></span>æ©™è‰²</td><td><strong>BI_DA-</strong> (TX-)</td></tr>
                        <tr><td>3</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, green 50%)"></span>ç™½/ç¶ </td><td><strong>BI_DB+</strong> (RX+)</td></tr>
                        <tr><td>4</td><td><span class="wire-dot" style="background:blue"></span>è—è‰²</td><td class="text-slate-400">BI_DC+</td></tr>
                        <tr><td>5</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, blue 50%)"></span>ç™½/è—</td><td class="text-slate-400">BI_DC-</td></tr>
                        <tr><td>6</td><td><span class="wire-dot" style="background:green"></span>ç¶ è‰²</td><td><strong>BI_DB-</strong> (RX-)</td></tr>
                        <tr><td>7</td><td><span class="wire-dot" style="background:linear-gradient(90deg, white 50%, brown 50%)"></span>ç™½/æ£•</td><td class="text-slate-400">BI_DD+</td></tr>
                        <tr><td>8</td><td><span class="wire-dot" style="background:brown"></span>æ£•è‰²</td><td class="text-slate-400">BI_DD-</td></tr>
                    </tbody>
                </table>
                <div class="mt-2 text-xs text-slate-400">* BI = Bi-directional (Gigabit å…¨é›™å·¥ä½¿ç”¨ 4 å°ç·š)</div>
                `
            },
            aviation: {
                icon: "ğŸ›¡ï¸", title: "èˆªç©ºæ’é ­ (Aviation Plug)",
                desc: "æˆ¶å¤–å±èˆ‡ç§Ÿè³ƒå±å°ˆç”¨ã€‚å…·å‚™é˜²æ°´ç’°èˆ‡é–æ‰£ï¼Œé˜²æ­¢éœ‡å‹•è„«è½ã€‚",
                specs: "<li>é˜²æ°´ç­‰ç´šï¼šIP65 / IP67</li><li>é¡å‹ï¼š3 Pin (Power), 4 Pin (Signal)</li>",
                pinoutHTML: `
                <table class="pin-table">
                    <thead><tr><th colspan="3" style="text-align:center; background:#e2e8f0;">å¸¸è¦‹ 3-Pin é›»æºå®šç¾©</th></tr></thead>
                    <tbody>
                        <tr><td>1 / L</td><td class="text-red-700 font-bold">Line</td><td>ç«ç·š (æ£•/ç´…)</td></tr>
                        <tr><td>2 / N</td><td class="text-blue-700 font-bold">Neutral</td><td>é›¶ç·š (è—/é»‘)</td></tr>
                        <tr><td>3 / PE</td><td class="text-green-700 font-bold">Ground</td><td>åœ°ç·š (é»ƒç¶ )</td></tr>
                    </tbody>
                </table>
                <div class="mt-3 p-2 bg-yellow-50 text-xs text-yellow-800 border border-yellow-200 rounded">âš ï¸ æ³¨æ„ï¼šè¨Šè™Ÿç”¨èˆªç©ºé ­å®šç¾©å„å» ç‰Œ(Neutrik/Seetronic)å¯èƒ½ä¸åŒï¼Œè«‹è©³é–±ç®±é«”æ‰‹å†Šã€‚</div>
                `
            },
            fiber: {
                icon: "ğŸ’¡", title: "å…‰çº–ä»‹é¢ (Fiber Optic)",
                desc: "æ§åˆ¶å®¤è·é›¢ > 100m æ™‚ä½¿ç”¨ã€‚éœ€é…åˆ SFP æ¨¡çµ„é€²è¡Œå…‰é›»è½‰æ›ã€‚",
                specs: "<li>æ¥é ­ï¼šLC (SFP) / SC</li><li>æ¨¡å¼ï¼šSingle Mode (å–®æ¨¡)</li>",
                pinoutHTML: `
                <div class="flex flex-col items-center justify-center h-48 text-slate-500">
                    <div class="text-5xl mb-2">TX â‡„ RX</div>
                    <p class="text-sm font-bold">Cross Connection</p>
                    <p class="text-xs mt-1">å…‰çº–ç„¡é›»æ°£è…³ä½ï¼Œåƒ…å€åˆ†ç™¼é€èˆ‡æ¥æ”¶</p>
                </div>
                `
            },
            dsub: {
                icon: "ğŸ“Ÿ", title: "DB9 / RS-232",
                desc: "å‚³çµ±åºåˆ—é€šè¨Šï¼Œç”¨æ–¼é€£æ¥å…‰æ„Ÿæ¢é ­æˆ–èˆŠå‹è¨­å‚™ã€‚",
                specs: "<li>ä»‹é¢ï¼šDE-9 (Male/Female)</li><li>å”å®šï¼šAsync Serial</li>",
                pinoutHTML: `
                <table class="pin-table">
                    <thead><tr><th>Pin</th><th>Name</th><th>Function</th></tr></thead>
                    <tbody>
                        <tr><td>2</td><td><strong>RXD</strong></td><td>Receive Data (æ¥æ”¶)</td></tr>
                        <tr><td>3</td><td><strong>TXD</strong></td><td>Transmit Data (ç™¼é€)</td></tr>
                        <tr><td>5</td><td><strong>GND</strong></td><td>Ground (åœ°ç·š)</td></tr>
                        <tr class="bg-slate-50 text-slate-400"><td>Others</td><td>NC</td><td>No Connection</td></tr>
                    </tbody>
                </table>
                `
            }
        };

        function selectConnector(key) {
            document.querySelectorAll('.connector-card').forEach(c => c.classList.remove('active'));
            document.getElementById(`card-${key}`).classList.add('active');
            const data = connectorData[key];
            document.getElementById('connector-icon').textContent = data.icon;
            document.getElementById('connector-title').textContent = data.title;
            document.getElementById('connector-desc').textContent = data.desc;
            document.getElementById('connector-specs').innerHTML = data.specs;
            document.getElementById('pinout-container').innerHTML = data.pinoutHTML;
        }
        selectConnector('rj45');

        // --- Topology & Control Logic (Animation) ---
        const canvas = document.getElementById('topologyCanvas');
        const ctx = canvas.getContext('2d');
        let activeTopology = 'chain';
        function resizeCanvas() { canvas.width = canvas.parentElement.clientWidth; canvas.height = canvas.parentElement.clientHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();

        class Node { constructor(x, y, label) { this.x = x; this.y = y; this.label = label; } }
        let nodes = [];
        
        function initTopology(type) {
            nodes = []; const w = canvas.width, h = canvas.height, startX = 50, startY = h/2;
            nodes.push(new Node(startX, startY, 'Sender'));
            if(type==='chain'||type==='ring') { const gap=(w-100)/4; for(let i=1;i<=4;i++) nodes.push(new Node(startX+i*gap, startY, `Cab ${i}`)); }
            else if(type==='star') { nodes.push(new Node(w/2, h/2-60, 'C1'), new Node(w/2+60, h/2, 'C2'), new Node(w/2, h/2+60, 'C3'), new Node(w/2-60, h/2, 'C4')); }
        }

        function draw() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            if(nodes.length===0) return;

            // 1. Static Lines
            ctx.lineWidth=3; ctx.strokeStyle='#94a3b8'; ctx.beginPath(); ctx.moveTo(nodes[0].x,nodes[0].y);
            if(activeTopology==='chain') for(let i=1;i<nodes.length;i++) ctx.lineTo(nodes[i].x,nodes[i].y);
            else if(activeTopology==='star') for(let i=1;i<nodes.length;i++) { ctx.moveTo(nodes[0].x,nodes[0].y); ctx.lineTo(nodes[i].x,nodes[i].y); }
            else if(activeTopology==='ring') { 
                for(let i=1;i<nodes.length;i++) ctx.lineTo(nodes[i].x,nodes[i].y); 
                ctx.stroke(); ctx.beginPath(); ctx.strokeStyle='#10b981'; 
                ctx.moveTo(nodes[nodes.length-1].x,nodes[nodes.length-1].y); 
                ctx.bezierCurveTo(nodes[nodes.length-1].x, nodes[nodes.length-1].y+100, nodes[0].x, nodes[0].y+100, nodes[0].x, nodes[0].y);
            }
            ctx.stroke();

            // 2. Animated Packets
            const time = Date.now() * 0.002;
            ctx.fillStyle = '#f59e0b';
            
            if (activeTopology === 'chain') {
                const totalDist = nodes[nodes.length-1].x - nodes[0].x;
                const offset = (time * 100) % totalDist;
                ctx.beginPath(); ctx.arc(nodes[0].x + offset, nodes[0].y, 6, 0, Math.PI*2); ctx.fill();
            } else if (activeTopology === 'star') {
                for(let i=1; i<nodes.length; i++) {
                    const dx = nodes[i].x - nodes[0].x;
                    const dy = nodes[i].y - nodes[0].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    const progress = (time * 100) % dist;
                    const ratio = progress / dist;
                    ctx.beginPath(); ctx.arc(nodes[0].x + dx*ratio, nodes[0].y + dy*ratio, 6, 0, Math.PI*2); ctx.fill();
                }
            } else if (activeTopology === 'ring') {
                const totalDist = nodes[nodes.length-1].x - nodes[0].x;
                const offset = (time * 100) % totalDist;
                ctx.beginPath(); ctx.arc(nodes[0].x + offset, nodes[0].y, 6, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = '#10b981'; 
                const returnProgress = (time * 100) % 1000 / 1000;
                const p0 = {x: nodes[nodes.length-1].x, y: nodes[nodes.length-1].y};
                const p1 = {x: (nodes[nodes.length-1].x + nodes[0].x)/2, y: nodes[0].y + 100};
                const p2 = {x: nodes[0].x, y: nodes[0].y};
                const t = returnProgress;
                const bx = (1-t)*(1-t)*p0.x + 2*(1-t)*t*p1.x + t*t*p2.x;
                const by = (1-t)*(1-t)*p0.y + 2*(1-t)*t*p1.y + t*t*p2.y;
                ctx.beginPath(); ctx.arc(bx, by, 5, 0, Math.PI*2); ctx.fill();
            }

            // 3. Nodes
            nodes.forEach(n=>{ 
                ctx.fillStyle=n.label==='Sender'?'#334155':'#3b82f6'; 
                ctx.fillRect(n.x-15,n.y-10,30,20); 
                if(n.label!=='Sender' && Math.random()>0.9) { ctx.fillStyle = '#60a5fa'; ctx.fillRect(n.x-12,n.y-8,24,16); }
            });
            requestAnimationFrame(draw);
        }

        function setTopology(type) { 
            activeTopology=type; 
            document.querySelectorAll('.topo-btn').forEach(b=>b.classList.remove('ring-2','bg-indigo-50')); 
            document.querySelector(`[data-type="${type}"]`).classList.add('ring-2','bg-indigo-50'); 
            initTopology(type); 
        }

        function toggleSystem(type) {
            // Hide all first
            ['sync', 'async', 'iot', 'softsender', 'allinone'].forEach(m => {
                const el = document.getElementById(`sys-content-${m}`);
                if(el) el.classList.add('hidden');
                const btn = document.getElementById(`btn-${m}`);
                if(btn) {
                    btn.classList.remove('bg-indigo-600', 'bg-amber-600', 'bg-emerald-600', 'bg-purple-600', 'bg-red-600', 'text-white');
                    btn.classList.add('text-slate-500');
                }
            });

            // Show selected
            document.getElementById(`sys-content-${type}`).classList.remove('hidden');
            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.classList.remove('text-slate-500');
            activeBtn.classList.add('text-white');
            
            // Color logic
            if (type === 'sync') activeBtn.classList.add('bg-indigo-600');
            else if (type === 'async') activeBtn.classList.add('bg-amber-600');
            else if (type === 'iot') activeBtn.classList.add('bg-emerald-600');
            else if (type === 'softsender') activeBtn.classList.add('bg-purple-600');
            else if (type === 'allinone') activeBtn.classList.add('bg-red-600');
        }

        // --- MAPPING LOGIC ---
        const cabGrid = document.getElementById('mappingGrid');
        const gridConsole = document.getElementById('gridConsole');
        const cabinets = [
            { id: 1, x: 0, y: 0, w: 640, h: 540 }, { id: 2, x: 640, y: 0, w: 640, h: 540 }, { id: 3, x: 1280, y: 0, w: 640, h: 540 },
            { id: 4, x: 0, y: 540, w: 640, h: 540 }, { id: 5, x: 640, y: 540, w: 640, h: 540 }, { id: 6, x: 1280, y: 540, w: 640, h: 540 }
        ];

        cabinets.forEach(cab => {
            const cell = document.createElement('div');
            cell.className = 'cab-cell';
            cell.innerHTML = `CAB ${cab.id}<span class="cab-coord">(${cab.x},${cab.y})</span>`;
            cell.onclick = () => selectCabinet(cab, cell);
            cabGrid.appendChild(cell);
        });

        function selectCabinet(cab, el) {
            document.querySelectorAll('.cab-cell').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            gridConsole.innerHTML = `
                <span class="text-indigo-600 font-bold">CABINET ${cab.id} SELECTED</span><br/>
                ----------------------------------------<br/>
                <span class="text-slate-500">FLASH CONFIG:</span> START_X=${cab.x}, START_Y=${cab.y}, W=${cab.w}, H=${cab.h}<br/>
                <span class="text-slate-500">FPGA ACTION:</span>  <span class="bg-green-100 text-green-700 px-1">LATCH DATA</span> from stream matching Offset [${cab.x} to ${cab.x+cab.w}]<br/>
                <span class="text-slate-500">STATUS:</span>      Receive & Display
            `;
        }

        // Init all
        initTopology('chain'); 
        draw();
    </script>
</body>
</html>

ç”¨é€™ä»½æ”¹